var e,l;e=jQuery,l={pips:function(l){var i,s,a,t,n,r=this,o="",p=r._valueMin(),d=(r._valueMax()-p)/r.options.step,u=r.element.find(".ui-slider-handle"),f={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:d>100?Math.floor(.05*d):1,formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(l)||"undefined"===e.type(l)){e.extend(f,l),r.element.data("pips-options",f),r.options.pipStep=Math.round(f.step),r.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var v={single:function(l){this.resetClasses(),n.filter(".ui-slider-pip-"+this.classLabel(l)).addClass("ui-slider-pip-selected"),r.options.range&&n.each((function(i,s){var a=e(s).children(".ui-slider-label").data("value");("min"===r.options.range&&a<l||"max"===r.options.range&&a>l)&&e(s).addClass("ui-slider-pip-inrange")}))},range:function(l){for(this.resetClasses(),i=0;i<l.length;i++)n.filter(".ui-slider-pip-"+this.classLabel(l[i])).addClass("ui-slider-pip-selected-"+(i+1));r.options.range&&n.each((function(i,s){var a=e(s).children(".ui-slider-label").data("value");a>l[0]&&a<l[1]&&e(s).addClass("ui-slider-pip-inrange")}))},classLabel:function(e){return e.toString().replace(".","-")},resetClasses:function(){var e=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;n.removeClass((function(l,i){return(i.match(e)||[]).join(" ")}))}};for(o+=h("first"),a=1;a<d;a++)a%r.options.pipStep==0&&(o+=h(a));for(o+=h("last"),r.element.append(o),n=r.element.find(".ui-slider-pip"),t=e._data(r.element.get(0),"events").mousedown&&e._data(r.element.get(0),"events").mousedown.length?e._data(r.element.get(0),"events").mousedown:r.element.data("mousedown-handlers"),r.element.data("mousedown-handlers",t.slice()),s=0;s<t.length;s++)"slider"===t[s].namespace&&r.element.data("mousedown-original",t[s].handler);r.element.off("mousedown.slider").on("mousedown.selectPip",(function(l){var i=e(l.target),s=c(i.data("value")),a=u.eq(s);a.addClass("ui-state-active"),i.is(".ui-slider-label")?(function(l,i){if(!r.option("disabled")){var s=e(l).data("value"),a=c(s);r.values()&&r.values().length?r.options.values[a]=r._trimAlignValue(s):r.options.value=r._trimAlignValue(s),r._refreshValue(),r._change(i,a)}}(i,l),r.element.one("mouseup.selectPip",(function(){a.removeClass("ui-state-active").focus()}))):r.element.data("mousedown-original")(l)})),r.element.on("slide.selectPip slidechange.selectPip",(function(l,i){var s=e(this),a=s.slider("value"),t=s.slider("values");i&&(a=i.value,t=i.values),r.values()&&r.values().length?v.range(t):v.single(a)}))}else"destroy"===l?r.element.off(".selectPip").on("mousedown.slider",r.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove():"refresh"===l&&r.element.slider("pips",r.element.data("pips-options"));function c(l){var i,s,a,t,n,o=[],p=0;if(r.values()&&r.values().length){for(a=r.values(),t=e.map(a,(function(e){return Math.abs(e-l)})),n=Math.min.apply(Math,t),i=0;i<t.length;i++)t[i]===n&&o.push(i);for(p=o[0],s=0;s<o.length;s++)r._lastChangedValue===o[s]&&(p=o[s]);r.options.range&&2===o.length&&(l>a[1]?p=o[1]:l<a[0]&&(p=o[0]))}return p}function h(l){var s,a,t=l,n="ui-slider-pip",o=r.value(),u=r.values();"first"===l?t=0:"last"===l&&(t=d);var v=p+r.options.step*t,c=v.toString().replace(".","-");if(s="array"===e.type(f.labels)?f.labels[t]||"":"object"===e.type(f.labels)?"first"===l?f.labels.first||"":"last"===l?f.labels.last||"":"array"===e.type(f.labels.rest)?f.labels.rest[t-1]||"":v:v,"first"===l?(a="0%",n+=" ui-slider-pip-first",n+="label"===f.first?" ui-slider-pip-label":"",n+=!1===f.first?" ui-slider-pip-hide":""):"last"===l?(a="100%",n+=" ui-slider-pip-last",n+="label"===f.last?" ui-slider-pip-label":"",n+=!1===f.last?" ui-slider-pip-hide":""):(a=(100/d*l).toFixed(4)+"%",n+="label"===f.rest?" ui-slider-pip-label":"",n+=!1===f.rest?" ui-slider-pip-hide":""),n+=" ui-slider-pip-"+c,u&&u.length){for(i=0;i<u.length;i++)v===u[i]&&(n+=" ui-slider-pip-initial-"+(i+1),n+=" ui-slider-pip-selected-"+(i+1));r.options.range&&v>u[0]&&v<u[1]&&(n+=" ui-slider-pip-inrange")}else v===o&&(n+=" ui-slider-pip-initial",n+=" ui-slider-pip-selected"),r.options.range&&("min"===r.options.range&&v<o||"max"===r.options.range&&v>o)&&(n+=" ui-slider-pip-inrange");return'<span class="'+n+'" style="'+("horizontal"===r.options.orientation?"left: "+a:"bottom: "+a)+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+v+'">'+f.formatLabel(s)+"</span></span>"}},float:function(l){var i,s=this,a=s._valueMin(),t=s._valueMax(),n=s._value(),r=s._values(),o=[],p=s.element.find(".ui-slider-handle"),d={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(l)||"undefined"===e.type(l)){if(e.extend(d,l),s.element.data("float-options",d),n<a&&(n=a),n>t&&(n=t),r&&r.length)for(i=0;i<r.length;i++)r[i]<a&&(r[i]=a),r[i]>t&&(r[i]=t);if(s.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),d.handle)for(o=s.values()&&s.values().length?u(r):u([n]),i=0;i<o.length;i++)p.eq(i).append(e('<span class="ui-slider-tip">'+d.formatLabel(o[i])+"</span>"));d.pips&&s.element.find(".ui-slider-label").each((function(l,i){var s,a=e(i),t=[a.data("value")];s=d.formatLabel(u(t)[0]),e('<span class="ui-slider-tip-label">'+s+"</span>").insertAfter(a)})),"slide"!==d.event&&"slidechange"!==d.event&&"slide slidechange"!==d.event&&"slidechange slide"!==d.event&&(d.event="slidechange slide"),s.element.off(".sliderFloat").on(d.event+".sliderFloat",(function(l,i){var s="array"===e.type(i.value)?i.value:[i.value],a=d.formatLabel(u(s)[0]);e(i.handle).find(".ui-slider-tip").html(a)}))}else"destroy"===l?s.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove():"refresh"===l&&s.element.slider("float",s.element.data("float-options"));function u(l){var n=[],r=e.map(l,(function(e){return Math.ceil((e-a)/s.options.step)}));if("array"===e.type(d.labels))for(i=0;i<l.length;i++)n[i]=d.labels[r[i]]||l[i];else if("object"===e.type(d.labels))for(i=0;i<l.length;i++)l[i]===a?n[i]=d.labels.first||a:l[i]===t?n[i]=d.labels.last||t:"array"===e.type(d.labels.rest)?n[i]=d.labels.rest[r[i]-1]||l[i]:n[i]=l[i];else for(i=0;i<l.length;i++)n[i]=l[i];return n}}},e.extend(!0,e.ui.slider.prototype,l);
